parseSMTLib2String :: Context
                   -> String     -- ^ string to parse
                   -> [Symbol]   -- ^ sort names
                   -> [Sort]     -- ^ sorts
                   -> [Symbol]   -- ^ declaration names
                   -> [FuncDecl] -- ^ declarations
                   -> IO AST
parseSMTLib2String ctx str sortNames sorts declNames decls =
  marshal z3_parse_smtlib2_string ctx $ \f ->
    withCString str $ \cstr ->
    marshalArrayLen sorts $ \sortNum sortArr ->
    marshalArray sortNames $ \sortNameArr ->
    marshalArrayLen decls $ \declNum declArr ->
    marshalArray declNames $ \declNameArr ->
      f cstr sortNum sortNameArr sortArr declNum declNameArr declArr
